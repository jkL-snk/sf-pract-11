# sf-pract-11

Скрипт Terraform для создания двух VM и скрипты для создания master и worker-нод Kubernetes с помощью kubectl.

Требования: Git, Terraform, аккаунт в Yandex Cloud, OAUTH-токен от аккаунта.

В файле meta.yml требуется изменить имя пользователя и публичный ключ на ваши. В файле variables.tf указать ваши идентификаторы облака и папки в облаке.

Порядок установки:

git clone https://github.com/jkL-snk/sf-pract-11.git

cd ./sf-pract-11

terraform apply

Потребуется ввести значение OAUTH-токена.

После выполнения терраформ выдаст внешние ip-адреса машин, по которым можно подключиться по SSH и выполнить одной машине master.sh, на другой worker.sh, начиная с мастера. Перед запуском master.sh объявить переменную EXTIP значением IP-адреса мастерноды: export EXTIP=<ip-адрес>. После создания кластера на мастер-ноде утилита kubeadm выдаст команду для подключения worker-ноды, эту команду следует выполнить после выполнения worker.sh на worker-ноде.